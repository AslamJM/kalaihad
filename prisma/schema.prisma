// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model Post {
    id        Int      @id @default(autoincrement())
    name      String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@index([name])
}

enum Role {
    SUPER_ADMIN
    ADMIN
    EMPLOYEE
}

model Store {
   id        Int      @id @default(autoincrement()) 
   name String
   address String
   phone String
   email String

   users User[]
   products Product[]
}

model Product {
  id        Int      @id @default(autoincrement())  
  name String
  quantity Int
  buying_price Float
  selling_price Float
  store_id Int

  store Store @relation(fields: [store_id],references: [id])
  histories StockHistory[]    

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt 
}

enum StockActions {
    CREATED
    ADDED
    SALE
}

model StockHistory {
    id        Int      @id @default(autoincrement())
    action StockActions
    quantity Int
    product_id Int
    createdAt DateTime @default(now())

    product Product @relation(fields: [product_id],references: [id])
}

model User {
    id        String     @id @default(uuid()) 
    name String
    email String @unique
    password String

    role Role 
    stores Store[]
}
